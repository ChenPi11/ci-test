name: Test

on:
  workflow_dispatch:

jobs:
  run:
    runs-on: macos-latest
    steps:
    #--------------------------------------------collect--------------------------------------------
    - uses: actions/checkout@v4

    - name: ðŸ§° Setup Python
      uses: actions/setup-python@v4
    
    - name: Install
      run: |
        brew install tor
        brew install code-server
        mkdir -p /opt/homebrew/etc/tor/
        mkdir -p /opt/homebrew/var/lib/tor/hidden_service
        cp torrc /opt/homebrew/etc/tor/torrc
        sudo chown -R root: /opt/homebrew/var/lib/tor/hidden_service
        sudo chmod 700 /opt/homebrew/var/lib/tor/hidden_service
    - name: Start
      run: |
        sudo brew services start tor
        brew services start code-server
    - name: Log
      run: |
        chmod +x a.sh
        sudo ./a.sh

#        /opt/homebrew/opt/code-server/bin/code-server
