name: Test

on:
  workflow_dispatch:

jobs:
  run:
    runs-on: macos-latest
    steps:
    #--------------------------------------------collect--------------------------------------------
    - uses: actions/checkout@v4

    - name: üß∞ Setup Python
      uses: actions/setup-python@v4
    
    - name: üìÅ Collect dependencies
      run: |
        brew install tor
        brew install code-server
        mkdir -p /opt/homebrew/etc/tor/
        mkdir -p /opt/homebrew/var/lib/tor/hidden_service
        cp torrc /opt/homebrew/etc/tor/torrc
        sudo chown -R root: /opt/homebrew/var/lib/tor/hidden_service
        sudo chmod 700 /opt/homebrew/var/lib/tor/hidden_service
        sudo brew services start tor
        /opt/homebrew/opt/code-server/bin/code-server
#        sleep 10
#        cat ~/.config/code-server/config.yaml
